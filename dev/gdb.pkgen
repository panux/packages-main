packages:
  gdb:
    dependencies:
  gdb-doc:
version: 7.12.1
builddependencies:
- g++
- ncurses-dev
- expat-dev
- texinfo
- readline-dev
- python2-dev
- zlib-dev
- autoconf
- automake
- libtool
- linux-headers
- perl
sources:
- https://ftp.gnu.org/gnu/gdb/gdb-{{.Version}}.tar.xz
script:
- tar -xf src/gdb-{{.Version}}.tar.xz
- mv gdb-{{.Version}} gdb
- (cd gdb && ./configure --build={{.Arch}}-pc-linux-gnu --prefix=/usr --sysconfdir=/etc --mandir=/usr/share/man --localstatedir=/var)
- $(MAKE) -C gdb
- $(MAKE) -C gdb DESTDIR=$(shell pwd)/out/gdb install
- mkdir -p out/gdb-doc/usr
- mv out/gdb/usr/share out/gdb-doc/usr
