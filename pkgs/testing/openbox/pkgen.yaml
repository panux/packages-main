packages:
  openbox:
    dependencies:
    - glib
    - libxml2
    - libintl
    - openbox-themes
    - libobt
    - libobrender
  openbox-locale:
  openbox-themes:
  openbox-doc:
    dependencies:
    - openbox-man
  openbox-gnome:
    dependencies:
    - openbox
  openbox-kde:
    dependencies:
    - openbox
  openbox-man:
  openbox-pkgconfig:
  openbox-headers:
  openbox-dev:
    dependencies:
    - openbox-pkgconfig
    - openbox-headers
  libobt:
  libobrender:
version: 3.6.1
builddependencies:
- pango-dev
- libxml2-dev
- imlib2-dev
- librsvg-dev
- gettext-dev
- libtool
- gcc
- m4
- automake
- autoconf
sources:
- https://github.com/Mikachu/openbox/archive/release-{{.Version}}.tar.gz
script:
- |
  tar -xf src/release-{{.Version}}.tar.gz
  mv openbox-release-{{.Version}} openbox
  (cd openbox && ./bootstrap && ./configure --prefix=/usr --sysconfdir=/etc --disable-static --docdir=/usr/share/doc/openbox-{{.Version}})
  $(MAKE) -C openbox
  make -j1 -C openbox install DESTDIR=$(shell pwd)/out/openbox
  {{pkmv "usr/include" "openbox" "openbox-headers"}}
  {{pkmv "usr/bin/openbox-gnome-session" "openbox" "openbox-gnome"}}
  {{pkmv "usr/bin/gdm-control" "openbox" "openbox-gnome"}}
  {{pkmv "usr/bin/gnome-panel-control" "openbox" "openbox-gnome"}}
  {{pkmv "usr/share/xsessions/openbox-gnome.desktop" "openbox" "openbox-gnome"}}
  {{pkmv "usr/share/gnome*" "openbox" "openbox-gnome"}}
  {{pkmv "usr/bin/openbox-kde-session" "openbox" "openbox-kde"}}
  {{pkmv "usr/share/xsessions/openbox-kde.desktop" "openbox" "openbox-kde"}}
  {{pkmv "usr/share/locale" "openbox" "openbox-locale"}}
  {{pkmv "usr/lib/pkgconfig" "openbox" "openbox-pkgconfig"}}
  {{pkmv "usr/share/man" "openbox" "openbox-man"}}
  {{pkmv "usr/share/doc" "openbox" "openbox-doc"}}
  {{pkmv "usr/share/themes" "openbox" "openbox-themes"}}
  {{pkmv "usr/lib/libobt*" "openbox" "libobt"}}
  {{pkmv "usr/lib/libobrender*" "openbox" "libobrender"}}
