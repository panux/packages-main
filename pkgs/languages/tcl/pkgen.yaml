packages:
  tcl:
    dependencies:
    - sqlite
    - musl
  tcl-dev:
    dependencies:
    - tcl
version: 8.6.4
sources:
- https://svwh.dl.sourceforge.net/project/tcl/Tcl/{{.Version}}/tcl{{.Version}}-src.tar.gz
builddependencies:
- sqlite-dev
- libc-dev
- gcc
script:
- |
  tar -xf src/tcl{{.Version}}-src.tar.gz
  mv tcl{{.Version}} tcl
  f64={{if eq "x86_64" buildarch}}--enable-64{{end}}
  {{configure "tcl/unix" "$$f64 --sysconfdir=/etc --with-system-sqlite"}}
  $(MAKE) -C tcl/unix
  $(MAKE) -C tcl/unix install DESTDIR=$(shell pwd)/out/tcl
