packages:
  flex:
    dependencies:
    - m4
    - musl
  flex-dev:
    dependencies:
    - flex
    - flex-headers
    - libfl
  flex-headers:
  libfl:
    dependencies:
    - m4
    - musl
  flex-doc:
    dependencies:
    - flex-man
    - flex-locale
  flex-man:
  flex-locale:
version: 2.6.4
builddependencies:
- m4
- bison
- help2man
sources:
- https://github.com/westes/flex/releases/download/v{{.Version}}/flex-{{.Version}}.tar.gz
builder: bootstrap
script:
- |
  {{extract "flex" "gz"}}
  (cd flex && ./configure --prefix=/usr --mandir=/usr/share/man --infodir=/usr/share/info	--disable-static --enable-shared)
  $(MAKE) -C flex
  $(MAKE) -C flex DESTDIR=$(shell pwd)/out/flex install
  {{pkmv "usr/include" "flex" "flex-headers"}}
  {{pkmv "usr/lib/libfl.*" "flex" "libfl"}}
  {{pkmv "usr/share/locale" "flex" "flex-locale"}}
  {{pkmv "usr/share/man" "flex" "flex-man"}}
  {{pkmv "usr/share" "flex" "flex-doc"}}
